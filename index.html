<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tatiana & Hernán - Invitación de Boda</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Great+Vibes&family=Playfair+Display:wght@400;700;900&family=Open+Sans:wght@300;400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>

    <!-- Botón de música -->
    <button id="music-toggle" class="music-btn" aria-label="Reproducir/Pausar música">
        <i id="music-icon" class="fas fa-heart-pulse"></i>
    </button>
    <audio id="background-music" src="audio/amarte.mp3" loop></audio>

    <!-- Section 1: Hero with Background and Countdown -->
    <section id="inicio" class="hero-section">
        <!-- Image Carousel -->
        <div class="carousel-container">
            <div class="carousel-slide active">
                <picture>
                    <source srcset="fotos/Car1-mobile.jpg" media="(max-width: 600px)">
                    <img src="fotos/Car1.jpeg" alt="Foto 1">
                </picture>
            </div>
            <div class="carousel-slide">
                <picture>
                    <source srcset="fotos/Car2-mobile.jpg" media="(max-width: 600px)">
                    <img src="fotos/Car2.jpeg" alt="Foto 2">
                </picture>
            </div>
            <div class="carousel-slide">
                <picture>
                    <source srcset="fotos/Car3-mobile.jpg" media="(max-width: 600px)">
                    <img src="fotos/Car3.jpeg" alt="Foto 3">
                </picture>
            </div>
            <div class="carousel-slide">
                <picture>
                    <source srcset="fotos/Car4-mobile.jpg" media="(max-width: 600px)">
                    <img src="fotos/Car4.jpg" alt="Foto 4">
                </picture>
            </div>
            <div class="carousel-slide">
                <picture>
                    <source srcset="fotos/Car5-mobile.jpg" media="(max-width: 600px)">
                    <img src="fotos/Car5.jpeg" alt="Foto 5">
                </picture>
            </div>
            <div class="carousel-slide">
                <picture>
                    <source srcset="fotos/Car6-mobile.jpg" media="(max-width: 600px)">
                    <img src="fotos/Car6.jpg" alt="Foto 6">
                </picture>
            </div>
            <div class="carousel-slide">
                <picture>
                    <source srcset="fotos/Car7-mobile.jpg" media="(max-width: 600px)">
                    <img src="fotos/Car7.jpg" alt="Foto 7">
                </picture>
            </div>
            <div class="carousel-slide">
                <picture>
                    <source srcset="fotos/Car8-mobile.jpg" media="(max-width: 600px)">
                    <img src="fotos/Car8.jpg" alt="Foto 8">
                </picture>
            </div>
            <div class="carousel-slide">
                <picture>
                    <source srcset="fotos/Car9-mobile.jpg" media="(max-width: 600px)">
                    <img src="fotos/Car9.jpg" alt="Foto 9">
                </picture>
            </div>
        </div>
        
        <!-- Carousel Controls -->
        <div class="carousel-controls">
            <span class="dot active" data-slide="0"></span>
            <span class="dot" data-slide="1"></span>
            <span class="dot" data-slide="2"></span>
            <span class="dot" data-slide="3"></span>
            <span class="dot" data-slide="4"></span>
            <span class="dot" data-slide="5"></span>
            <span class="dot" data-slide="6"></span>
            <span class="dot" data-slide="7"></span>
            <span class="dot" data-slide="8"></span>
        </div>
        
        <div class="hero-overlay"></div>
        <div class="hero-content">
        <div class="names">
            <div class="names-stack">
                <span class="bride-name">Tatiana</span>
                <span class="ampersand">&</span>
                <span class="groom-name">Hernán</span>
            </div>
        </div>
            <!-- <button class="scroll-btn" onclick="scrollToSection('detalles')">
                <i class="fas fa-chevron-down"></i>
            </button> -->
        </div>
    </section>

    <!-- Horizontal Floral Divider -->
    <!-- Horizontal Floral Divider -->
    <div class="bottom-section">
        <div class="wedding-date">
            <h2>19 de Octubre / 2025</h2>
        </div>
        <div id="countdown" class="countdown">
            <div class="countdown-item">
                <span id="months">0</span>
                <label>Meses</label>
            </div>
            <div class="countdown-item">
                <span id="days">0</span>
                <label>Días</label>
            </div>
            <div class="countdown-item">
                <span id="hours">0</span>
                <label>Horas</label>
            </div>
            <div class="countdown-item">
                <span id="minutes">0</span>
                <label>Minutos</label>
            </div>
            <div class="countdown-item">
                <span id="seconds">0</span>
                <label>Segundos</label>
            </div>
        </div>
    </div>
    <div class="horizontal-floral-divider">
        <img src="fotos/floral-divider.png" alt="Divisor floral">
    </div>

    <!-- Section 2: Wedding Details -->
    <section id="detalles" class="details-section section-with-floral-overlap">
        <div class="section-floral-decoration full-right">
            <img src="fotos/floral1.png" alt="Decoración floral">
        </div>
        <div class="container">
            <div class="section-header">
                <h2>Celebración</h2>
                <div class="decorative-line"></div>
            </div>
            <div class="details-content">
                <div class="detail-image-frame card-style">
                    <div class="image-zoom-wrapper">
                        <img src="fotos/hacienda.png" alt="Hacienda San Sebastian" id="hacienda-img" class="hacienda-img" />
                        <span class="hacienda-caption">Hacienda San Sebastian</span>
                    </div>
                </div>
                <div class="detail-card reception card-style">
                    <div class="reception-card-inner">
                        <!-- <div class="reception-icons">
                            <i class="fas fa-church"></i>
                            <i class="fas fa-glass-cheers"></i>
                        </div> -->
                        <h3 class="reception-title">Ceremonia & Recepción</h3>
                        <div class="reception-content">
                            <div class="reception-detail-row left-align"><i class="fas fa-calendar-alt card-icon"></i><span class="reception-detail-text">Domingo, 19 de Octubre 2025</span></div>
                            <div class="reception-detail-row left-align"><i class="fas fa-clock card-icon"></i><span class="reception-detail-text">3:00 PM</span></div>
                            <div class="reception-detail-row left-align"><i class="fas fa-map-marker-alt card-icon"></i><span class="reception-detail-text">Hacienda San Sebastian</span></div>
                            <div class="reception-detail-row left-align"><i class="fas fa-map card-icon"></i><span class="reception-detail-text">Subachoque, Cundinamarca</span></div>
                        </div>
                    </div>
                </div>
<!-- Los estilos de la sección detalles han sido migrados a styles.css -->
            </div>
            <!-- <button class="scroll-btn" onclick="scrollToSection('confirmacion')">
                <i class="fas fa-chevron-down"></i>
            </button> -->
        </div>
    </section>

    <!-- Modal para visor de imagen -->
    <div id="hacienda-modal" class="modal-image-viewer" style="display:none;">
        <span class="close-modal" id="close-hacienda-modal">&times;</span>
        <img class="modal-content" id="modal-hacienda-img" src="fotos/hacienda.png" alt="Hacienda San Sebastian" />
        <span class="modal-caption" style="display:block; margin-top:1.1rem; text-align:center; font-family: 'Great Vibes', cursive; font-size: 2rem; color: #fffbe9; font-style: italic; text-shadow: 1px 1px 8px #a0522d;">Hacienda San Sebastian</span>
    </div>

    <!-- Horizontal Floral Divider -->
    <div class="horizontal-floral-divider">
        <img src="fotos/floral-divider.png" alt="Divisor floral">
    </div>

    <!-- Section 5: Location with Google Maps -->
    <section id="ubicacion" class="location-section section-with-floral-overlap">
        <div class="section-floral-decoration full-right">
            <img src="fotos/floral1.png" alt="Decoración floral">
        </div>
        <div class="container">
            <div class="section-header">
                <h2>Ubicación</h2>
                <div class="decorative-line"></div>
            </div>
            <div class="location-content">
                <div class="location-info">
                    <h3>Hacienda San Sebastian (Eventos)</h3>
                    <p class="location-address">
                        <i class="fas fa-map-marker-alt"></i>
                        Subachoque, Cundinamarca, Colombia
                    </p>
                    <div class="location-features">
                        <div class="feature">
                            <i class="fas fa-car"></i>
                            <span>Parqueadero disponible</span>
                        </div>
                    </div>
                    <a href="https://maps.app.goo.gl/s1tgKHiETkAWQnyD7" target="_blank" class="directions-btn">
                        <i class="fas fa-directions"></i>
                        Cómo llegar
                    </a>
                </div>
                <div class="map-container">
                    <iframe 
                        src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3975.4341525393243!2d-74.23766172424938!3d4.866693595109011!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x8e3f7fce1e19d529%3A0xe3b994cd352d1399!2sHacienda%20San%20Sebasti%C3%A1n%20(Eventos)!5e0!3m2!1ses!2sco!4v1751650327592!5m2!1ses!2sco"
                        width="100%" 
                        height="300" 
                        style="border:0;" 
                        allowfullscreen="" 
                        loading="lazy" 
                        referrerpolicy="no-referrer-when-downgrade">
                    </iframe>
                </div>
            </div>
        </div>
    </section>

    <!-- Section 3: RSVP -->
     <div class="horizontal-floral-divider">
        <img src="fotos/floral-divider.png" alt="Divisor floral">
    </div>
    <section id="confirmacion" class="rsvp-section section-with-floral-overlap">
        <div class="section-floral-decoration full-right">
            <img src="fotos/floral1.png" alt="Decoración floral">
        </div>
        <div class="container">
            <div class="section-header">
                <h2>Confirma tu Asistencia</h2>
                <div class="decorative-line"></div>
                <!-- <p>Por favor confirma tu asistencia antes del 1 de Octubre</p> -->
            </div>
            <div class="rsvp-form-container">
                <form id="rsvpForm" class="rsvp-form">
                    <div class="form-group asistencia-group">
                        <label for="asistencia" class="asistencia-label">¿Podrás acompañarnos?</label>
                        <div class="radio-group">
                            <label class="radio-option">
                                <input type="radio" name="asistencia" value="Si" required>
                                <span class="radio-custom"><i class="fas fa-heart"></i></span>
                                ¡Sí, estaré ahí!
                            </label>
                            <label class="radio-option">
                                <input type="radio" name="asistencia" value="No" required>
                                <span class="radio-custom"><i class="fas fa-heart-broken"></i></span>
                                No podré asistir
                            </label>
                        </div>
                    </div>
                    <div class="form-group" id="nombre-group" style="display:none;">
                        <label for="nombre">Nombre Completo</label>
                        <input type="text" id="nombre" name="nombre">
                    </div>
                    <div class="form-group acomp-row" id="acompanantes-group" style="display:none; flex-direction: row; gap: 1rem; align-items: flex-end;">
                        <div class="acompanantes-row">
                            <div class="acompanante-col">
                                <label for="adultos">Adultos</label>
                                <select id="adultos" name="adultos">
                                    <option value="0">0</option>
                                    <option value="1">1</option>
                                    <option value="2">2</option>
                                    <option value="3">3</option>
                                    <option value="4">4</option>
                                </select>
                            </div>
                            <div class="acompanante-col">
                                <label for="ninos">Niños</label>
                                <select id="ninos" name="ninos">
                                    <option value="0">0</option>
                                    <option value="1">1</option>
                                    <option value="2">2</option>
                                    <option value="3">3</option>
                                    <option value="4">4</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    <!-- <div class="form-group">
                        <label for="mensaje">Mensaje Especial (Opcional)</label>
                        <textarea id="mensaje" name="mensaje" rows="4" placeholder="Deja un mensaje para los novios..."></textarea>
                    </div> -->
                    <button type="submit" class="submit-btn">
                        <i class="fas fa-heart"></i>
                        <span id="submit-text">Confirmar Asistencia</span>
                    </button>
                </form>
            </div>
            <!-- <button class="scroll-btn" onclick="scrollToSection('vestuario')">
                <i class="fas fa-chevron-down"></i>
            </button> -->
        </div>
    </section>

    <!-- Horizontal Floral Divider -->
    <div class="horizontal-floral-divider">
        <img src="fotos/floral-divider.png" alt="Divisor floral">
    </div>

    <!-- Section 4: Dress Code -->
    <section id="vestuario" class="dress-code-section section-with-floral-overlap">
        <div class="section-floral-decoration full-right">
            <img src="fotos/floral1.png" alt="Decoración floral">
        </div>
        <div class="container">
            <div class="section-header">
                <h2>Código de Vestuario</h2>
                <div class="decorative-line"></div>
            </div>
            <div class="dress-code-content">
                <div class="dress-code-card">
                    <div class="dress-icon">
                        <i class="fas fa-user-tie"></i>
                    </div>
                    <h3>Caballeros</h3>
                    <ul>
                        <li>Traje formal</li>
                        <li>Camisa blanca</li>
                        <li>Corbata</li>
                        <li>Zapatos de vestir</li>
                    </ul>
                </div>
                <div class="dress-code-card">
                    <div class="dress-icon">
                        <i class="fas fa-female"></i>
                    </div>
                    <h3>Damas</h3>
                    <ul>
                        <li>Vestido elegante</li>
                        <li>Evitar el color blanco</li>
                        <li>Tacones cómodos</li>
                        <li>Accesorios delicados</li>
                    </ul>
                </div>
            </div>
            <div class="dress-note">
                <p><i class="fas fa-info-circle"></i> La celebración será al aire libre, considera el clima.</p>
            </div>
            <!-- <button class="scroll-btn" onclick="scrollToSection('ubicacion')">
                <i class="fas fa-chevron-down"></i>
            </button> -->
        </div>
    </section>

    <!-- Horizontal Floral Divider -->
    <div class="horizontal-floral-divider">
        <img src="fotos/floral-divider.png" alt="Divisor floral">
    </div>

    

    <!-- Footer -->
    <!-- <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-text">
                    <h3>Tatiana & Hernán</h3>
                    <p>Con amor esperamos celebrar contigo nuestro día especial</p>
                </div>
            </div>
        </div>
    </footer> -->

    <!-- Bottom Mobile Navigation -->
    <nav class="bottom-nav">
        <a href="#detalles" class="nav-item" data-section="detalles">
            <i class="fas fa-calendar-alt"></i>
            <span>Fecha</span>
        </a>
        <a href="#ubicacion" class="nav-item" data-section="ubicacion">
            <i class="fas fa-map-marker-alt"></i>
            <span>Ubicación</span>
        </a>
        <a href="#inicio" class="nav-item home-button active" data-section="inicio">
            <i class="fas fa-church"></i>
        </a>
        <a href="#confirmacion" class="nav-item" data-section="confirmacion">
            <i class="fas fa-check-circle"></i>
            <span>Confirmar</span>
        </a>
        <a href="#vestuario" class="nav-item" data-section="vestuario">
            <i class="fas fa-shirt"></i>
            <span>Codigo</span>
        </a>
    </nav>

    <script src="script.js"></script>
    <script>
    // --- ENVÍO DE FORMULARIO A GOOGLE SHEETS (UNIFICADO Y CORRECTO) ---
    const rsvpForm = document.getElementById('rsvpForm');
    const submitBtn = rsvpForm ? rsvpForm.querySelector('.submit-btn') : null;
    const submitText = document.getElementById('submit-text');
    const nombreGroup = document.getElementById('nombre-group');
    const acompanantesGroup = document.getElementById('acompanantes-group');
    const adultosSelect = document.getElementById('adultos');
    const ninosSelect = document.getElementById('ninos');
    let selectedAsistencia = null;

    // Mostrar campos según selección
    if (rsvpForm && rsvpForm.asistencia) {
      Array.from(rsvpForm.asistencia).forEach(radio => {
        radio.addEventListener('change', function() {
          selectedAsistencia = this.value;
          nombreGroup.style.display = 'block';
          if (this.value === 'Si') {
            acompanantesGroup.style.display = 'flex';
          } else {
            acompanantesGroup.style.display = 'none';
            adultosSelect.value = '0';
            ninosSelect.value = '0';
          }
        });
      });
    }

    // --- Mantener scroll en la sección de confirmación en móviles (mejorado para Android) ---
    function scrollToConfirmacionIfNeeded(force) {
      const confirmacionSection = document.getElementById('confirmacion');
      if (confirmacionSection) {
        confirmacionSection.scrollIntoView({ behavior: force ? 'auto' : 'smooth', block: 'start' });
        // Hack extra: volver a forzar el scroll tras 200ms por si el navegador lo sobrescribe
        setTimeout(() => {
          confirmacionSection.scrollIntoView({ behavior: 'auto', block: 'start' });
        }, 200);
      }
    }
    if (rsvpForm) {
      const inputs = rsvpForm.querySelectorAll('input, select, textarea');
      // Forzar scroll al perder foco (blur) y al salir de input (focusout)
      inputs.forEach(input => {
        input.addEventListener('blur', function() {
          if (window.innerWidth <= 600) {
            setTimeout(() => scrollToConfirmacionIfNeeded(false), 100);
          }
        });
        input.addEventListener('focusout', function() {
          if (window.innerWidth <= 600) {
            setTimeout(() => scrollToConfirmacionIfNeeded(true), 120);
          }
        });
      });
      // También al hacer submit, para asegurar que el scroll no se pierda
      rsvpForm.addEventListener('submit', function() {
        if (window.innerWidth <= 600) {
          setTimeout(() => scrollToConfirmacionIfNeeded(true), 150);
        }
      });
    }

    if (rsvpForm) {
      rsvpForm.addEventListener('submit', function(e) {
        e.preventDefault();
        if (!submitBtn || !submitText) return;
        submitBtn.disabled = true;
        submitText.textContent = 'Enviando...';

        const formData = new FormData(rsvpForm);
        const data = {
          asistencia: formData.get('asistencia') || '',
          nombre: formData.get('nombre') || '',
          adultos: formData.get('adultos') || '0',
          ninos: formData.get('ninos') || '0',
        };

        fetch('https://script.google.com/macros/s/AKfycbx4suRGduWD35ePxm53fOqHrIFcJqaelMFFbVhxPTvb8205xOyGcFRnMeMslcyed6DZUw/exec', {
          method: 'POST',
          mode: 'no-cors',
          headers: {
            'Content-Type': 'application/x-www-form-urlencoded',
          },
          body: new URLSearchParams(data).toString()
        }).then(() => {
          submitText.textContent = '¡Confirmado!';
          submitBtn.classList.add('success');
          setTimeout(() => {
            submitText.textContent = 'Confirmar Asistencia';
            submitBtn.classList.remove('success');
            submitBtn.disabled = false;
            rsvpForm.reset();
            nombreGroup.style.display = 'none';
            acompanantesGroup.style.display = 'none';
          }, 2500);
        }).catch(() => {
          submitText.textContent = 'Error, intenta de nuevo';
          submitBtn.classList.add('error');
          setTimeout(() => {
            submitText.textContent = 'Confirmar Asistencia';
            submitBtn.classList.remove('error');
            submitBtn.disabled = false;
          }, 2500);
        });
      });
    }
    // --- FIN ENVÍO FORMULARIO ---
    </script>
    <script>
        function scrollToSection(sectionId) {
            document.getElementById(sectionId).scrollIntoView({ behavior: 'smooth' });
        }
        // Música de fondo
        const music = document.getElementById('background-music');
        const musicBtn = document.getElementById('music-toggle');
        const musicIcon = document.getElementById('music-icon');
        let isPlaying = false;

        function playMusic() {
            music.play().then(function() {
                isPlaying = true;
                musicIcon.classList.remove('fa-heart');
                musicIcon.classList.add('fa-heart-pulse');
            }).catch(function() {
                // Si el navegador bloquea el autoplay, se ignora el error
            });
        }
        function pauseMusic() {
            music.pause();
            isPlaying = false;
            musicIcon.classList.remove('fa-heart-pulse');
            musicIcon.classList.add('fa-heart');
        }

        // --- AUTOPLAY EN MÓVIL: MAXIMIZAR COMPATIBILIDAD ---
        // 1. Intentar reproducir al cargar
        document.addEventListener('DOMContentLoaded', function() {
            musicIcon.classList.add('fa-heart');
            setTimeout(function() {
                playMusic();
            }, 300);
        });

        // 2. Intentar reproducir en el primer gesto del usuario (cualquier parte de la página)
        function tryPlayOnUserGesture(e) {
            if (!isPlaying && music.paused) {
                playMusic();
            }
            // Remover todos los listeners de interacción
            document.removeEventListener('touchstart', tryPlayOnUserGesture, true);
            document.removeEventListener('pointerdown', tryPlayOnUserGesture, true);
            document.removeEventListener('mousedown', tryPlayOnUserGesture, true);
            document.removeEventListener('click', tryPlayOnUserGesture, true);
        }
        // Registrar listeners lo antes posible
        document.addEventListener('DOMContentLoaded', function() {
            // Registrar todos los eventos posibles para móviles y escritorio
            document.addEventListener('touchstart', tryPlayOnUserGesture, { once: true, capture: true, passive: false });
            document.addEventListener('pointerdown', tryPlayOnUserGesture, { once: true, capture: true, passive: false });
            document.addEventListener('mousedown', tryPlayOnUserGesture, { once: true, capture: true, passive: false });
            document.addEventListener('click', tryPlayOnUserGesture, { once: true, capture: true, passive: false });
        });

        // 3. El botón de música siempre debe funcionar
        musicBtn.addEventListener('click', function(e) {
            if (isPlaying) {
                pauseMusic();
            } else {
                playMusic();
            }
        });

        // --- FIN AUTOPLAY ---

        // Visor de imagen para la hacienda
        const haciendaImg = document.getElementById('hacienda-img');
        const haciendaModal = document.getElementById('hacienda-modal');
        const modalImg = document.getElementById('modal-hacienda-img');
        const closeModal = document.getElementById('close-hacienda-modal');
        if (haciendaImg && haciendaModal && modalImg && closeModal) {
            haciendaImg.addEventListener('click', function() {
                haciendaModal.style.display = 'flex';
                document.body.style.overflow = 'hidden';
            });
            closeModal.addEventListener('click', function() {
                haciendaModal.style.display = 'none';
                document.body.style.overflow = '';
            });
            haciendaModal.addEventListener('click', function(e) {
                if (e.target === haciendaModal) {
                    haciendaModal.style.display = 'none';
                    document.body.style.overflow = '';
                }
            });
            document.addEventListener('keydown', function(e) {
                if (e.key === 'Escape' && haciendaModal.style.display === 'flex') {
                    haciendaModal.style.display = 'none';
                    document.body.style.overflow = '';
                }
            });
        }
    </script>
</body>
</html>
